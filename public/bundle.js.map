{"version":3,"sources":["webpack:///webpack/bootstrap 0ab4db250059c8bb7f80","webpack:///./public/js/index.js","webpack:///./public/js/messenger.js"],"names":["TYPING_TIMER_LENGTH","messenger","socket","typing","$","addEventListeners","setSocketIo","io","on","data","appendLog","username","numUsers","appendYourMessage","message","appendTyping","removeTyping","login","$input","monitorTyping","submit","chat","emit","lastTypingTime","Date","getTime","setTimeout","typingTimer","timeDiff","appendMyMessage","val","trim","fadeOut","off","show","focus","Messenger","$messages","console","log","msg","append","text","_scrollDown","user","html","_getTypingMessages","remove","filter","i","scrollTop","scrollHeight"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 0ab4db250059c8bb7f80","import Messenger from './messenger';\n\n\nconst TYPING_TIMER_LENGTH = 400; // ms\n\nlet messenger;\nlet socket;\nlet typing = false;\n\n$(function() {\n  messenger = new Messenger($('#messages'));\n  addEventListeners();\n  setSocketIo();\n});\n\nfunction setSocketIo() {\n  socket = io();\n\n  socket.on('login', function (data) {\n    messenger.appendLog(`Welcome, ${data.username}! (${data.numUsers})`);\n  });\n\n  socket.on('user joined', function (data) {\n    messenger.appendLog(`${data.username} joined. (${data.numUsers})`);\n  });\n\n  socket.on('user left', function (data) {\n    messenger.appendLog(`${data.username} left. (${data.numUsers})`);\n  });\n\n  socket.on('chat message', function(data){\n    messenger.appendYourMessage(data.username, data.message);\n  });\n\n  socket.on('typing', function(data) {\n    messenger.appendTyping(data.username);\n  });\n\n  socket.on('stop typing', function(data) {\n    messenger.removeTyping(data.username);\n  });\n\n  socket.on('disconnect', function () {\n    messenger.appendLog('You have been disconnected.');\n  });\n\n  socket.on('reconnect', function () {\n    messenger.appendLog('You have been reconnected.');\n    login();\n  });\n}\n\nfunction addEventListeners() {\n  const $input = $('#inputMessage');\n  $input.on('input', function() {\n    monitorTyping();\n  });\n\n  $('#formChat').submit(() => {\n    chat();\n    return false;\n  });\n\n  $('#formLogin').submit(() => {\n    login();\n    return false;\n  });\n}\n\nfunction monitorTyping () {\n  if (!typing) {\n    typing = true;\n    socket.emit('typing');\n  }\n\n  let lastTypingTime = new Date().getTime();\n\n  setTimeout(function () {\n    var typingTimer = new Date().getTime();\n    var timeDiff = typingTimer - lastTypingTime;\n    if (timeDiff >= TYPING_TIMER_LENGTH && typing) {\n      socket.emit('stop typing');\n      typing = false;\n    }\n  }, TYPING_TIMER_LENGTH);\n}\n\nfunction chat() {\n  messenger.appendMyMessage($('#inputUsername').val(), $('#inputMessage').val());\n  socket.emit('chat message', $('#inputMessage').val());\n  $('#inputMessage').val('');\n}\n\nfunction login() {\n  const $input = $('#inputUsername');\n  const username = $input.val().trim();\n\n  if (username) {\n    $('#loginPage').fadeOut();\n    $('#loginPage').off('click');\n    $('#chatPage').show();\n    $('#inputMessage').focus();\n\n    socket.emit('add user', username);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./public/js/index.js","export default class Messenger {\n\n  constructor($messages) {\n    console.log('### Messenger object is created. ###');\n    this.$messages = $messages;\n  }\n\n  appendLog(msg) {\n    this.$messages.append($('<li class=\"log\">').text(msg));\n    this._scrollDown();\n  }\n\n  appendMyMessage(user, msg) {\n    this.$messages.append($('<li>').html(`<span class=\"label label-success\">${user}</span> ${msg}`));\n    this._scrollDown();\n  }\n\n  appendYourMessage(user, msg) {\n    this.$messages.append($('<li>').html(`<span class=\"label label-default\">${user}</span> ${msg}`));\n    this._scrollDown();\n  }\n\n  appendTyping(user) {\n    this.$messages.append($('<li class=\"log\">').html(`${user} is typing...`).data('user', user));\n    this._scrollDown();\n  }\n\n  removeTyping(user) {\n    this._getTypingMessages(user).fadeOut(() => {\n      $(this).remove();\n    });\n  }\n\n  _getTypingMessages(user) {\n    return $('.log').filter((i) => {\n      return $(this).data('user') === user;\n    });\n  }\n\n  _scrollDown() {\n    this.$messages[0].scrollTop = this.$messages[0].scrollHeight;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./public/js/messenger.js"],"sourceRoot":""}