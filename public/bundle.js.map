{"version":3,"sources":["webpack:///webpack/bootstrap e56c009b47e323fc03ac","webpack:///./public/js/messenger.js","webpack:///./public/js/index.js"],"names":["Messenger","$messages","console","log","msg","append","$","text","_scrollDown","user","html","data","msgToRemove","_getTypingMessages","fadeOut","remove","filter","index","element","scrollTop","scrollHeight","TYPING_TIMER_LENGTH","messenger","socket","typing","addEventListeners","setSocketIo","io","on","appendLog","username","numUsers","appendYourMessage","message","appendTyping","removeTyping","login","$input","monitorTyping","submit","chat","emit","lastTypingTime","Date","getTime","setTimeout","typingTimer","timeDiff","appendMyMessage","val","trim","off","show","focus"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap e56c009b47e323fc03ac","export default class Messenger {\n\n  constructor($messages) {\n    console.log('### Messenger object is created. ###');\n    this.$messages = $messages;\n  }\n\n  appendLog(msg) {\n    this.$messages.append($('<li class=\"log\">').text(msg));\n    this._scrollDown();\n  }\n\n  appendMyMessage(user, msg) {\n    this.$messages.append($('<li>').html(`<span class=\"label label-success\">${user}</span> ${msg}`));\n    this._scrollDown();\n  }\n\n  appendYourMessage(user, msg) {\n    this.$messages.append($('<li>').html(`<span class=\"label label-default\">${user}</span> ${msg}`));\n    this._scrollDown();\n  }\n\n  appendTyping(user) {\n    this.$messages.append($('<li class=\"log\">').html(`${user} is typing...`).data('user', user));\n    this._scrollDown();\n  }\n\n  removeTyping(user) {\n    let msgToRemove = this._getTypingMessages(user);\n    msgToRemove.fadeOut(() => {\n      $(msgToRemove).remove();\n    });\n  }\n\n  _getTypingMessages(user) {\n    return $('.log').filter((index, element) => {\n      return $(element).data('user') === user;\n    });\n  }\n\n  _scrollDown() {\n    this.$messages[0].scrollTop = this.$messages[0].scrollHeight;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./public/js/messenger.js","import Messenger from './messenger';\n\n\nconst TYPING_TIMER_LENGTH = 400; // ms\n\nlet messenger;\nlet socket;\nlet typing = false;\n\n$(function() {\n  messenger = new Messenger($('#messages'));\n  addEventListeners();\n  setSocketIo();\n});\n\nfunction setSocketIo() {\n  socket = io();\n\n  socket.on('login', function (data) {\n    messenger.appendLog(`Welcome, ${data.username}! (${data.numUsers})`);\n  });\n\n  socket.on('user joined', function (data) {\n    messenger.appendLog(`${data.username} joined. (${data.numUsers})`);\n  });\n\n  socket.on('user left', function (data) {\n    messenger.appendLog(`${data.username} left. (${data.numUsers})`);\n  });\n\n  socket.on('chat message', function(data){\n    messenger.appendYourMessage(data.username, data.message);\n  });\n\n  socket.on('typing', function(data) {\n    messenger.appendTyping(data.username);\n  });\n\n  socket.on('stop typing', function(data) {\n    messenger.removeTyping(data.username);\n  });\n\n  socket.on('disconnect', function () {\n    messenger.appendLog('You have been disconnected.');\n  });\n\n  socket.on('reconnect', function () {\n    messenger.appendLog('You have been reconnected.');\n    login();\n  });\n}\n\nfunction addEventListeners() {\n  const $input = $('#inputMessage');\n  $input.on('input', function() {\n    monitorTyping();\n  });\n\n  $('#formChat').submit(() => {\n    chat();\n    return false;\n  });\n\n  $('#formLogin').submit(() => {\n    login();\n    return false;\n  });\n}\n\nfunction monitorTyping () {\n  if (!typing) {\n    typing = true;\n    socket.emit('typing');\n  }\n\n  let lastTypingTime = new Date().getTime();\n\n  setTimeout(function () {\n    let typingTimer = new Date().getTime();\n    let timeDiff = typingTimer - lastTypingTime;\n    if (timeDiff >= TYPING_TIMER_LENGTH && typing) {\n      socket.emit('stop typing');\n      typing = false;\n    }\n  }, TYPING_TIMER_LENGTH);\n}\n\nfunction chat() {\n  messenger.appendMyMessage($('#inputUsername').val(), $('#inputMessage').val());\n  socket.emit('chat message', $('#inputMessage').val());\n  $('#inputMessage').val('');\n}\n\nfunction login() {\n  const $input = $('#inputUsername');\n  const username = $input.val().trim();\n\n  if (username) {\n    $('#loginPage').fadeOut();\n    $('#loginPage').off('click');\n    $('#chatPage').show();\n    $('#inputMessage').focus();\n\n    socket.emit('add user', username);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./public/js/index.js"],"sourceRoot":""}