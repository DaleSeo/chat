{"version":3,"sources":["webpack:///webpack/bootstrap 52809338bc3dcab5f8ce","webpack:///./public/js/index.js"],"names":["TYPING_TIMER_LENGTH","socket","username","typing","$","initialize","$input","on","monitorTyping","setSocketIo","addKeyEvent","addSubmitEvent","emit","lastTypingTime","Date","getTime","setTimeout","typingTimer","timeDiff","io","data","appendLog","numUsers","addYourMessage","message","showTyping","hideTyping","login","window","keydown","event","ctrlKey","metaKey","altKey","focus","submit","chat","val","trim","fadeOut","show","off","addMyMessage","msg","$messages","append","text","scrollTop","scrollHeight","user","html","getTypingMessages","remove","filter","i"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 52809338bc3dcab5f8ce","const TYPING_TIMER_LENGTH = 400; // ms\n\nlet socket;\nlet username;\nlet typing = false;\n\n$(function() {\n  initialize();\n});\n\nfunction initialize() {\n  const $input = $('#inputMessage');\n  $input.on('input', function() {\n    monitorTyping();\n  });\n\n  setSocketIo();\n  addKeyEvent();\n  addSubmitEvent();\n}\n\nfunction monitorTyping () {\n  if (!typing) {\n    typing = true;\n    socket.emit('typing');\n  }\n\n  let lastTypingTime = new Date().getTime();\n\n  setTimeout(function () {\n    var typingTimer = new Date().getTime();\n    var timeDiff = typingTimer - lastTypingTime;\n    if (timeDiff >= TYPING_TIMER_LENGTH && typing) {\n      socket.emit('stop typing');\n      typing = false;\n    }\n  }, TYPING_TIMER_LENGTH);\n}\n\nfunction setSocketIo() {\n  socket = io();\n\n  socket.on('login', function (data) {\n    appendLog(`Welcome, ${data.username}! (${data.numUsers})`);\n  });\n\n  socket.on('user joined', function (data) {\n    appendLog(`${data.username} joined. (${data.numUsers})`);\n  });\n\n  socket.on('user left', function (data) {\n    appendLog(`${data.username} left. (${data.numUsers})`);\n  });\n\n  socket.on('chat message', function(data){\n    addYourMessage(data.username, data.message);\n  });\n\n  socket.on('typing', function(data) {\n    showTyping(data.username);\n  });\n\n  socket.on('stop typing', function(data) {\n    hideTyping(data.username);\n  });\n\n  socket.on('disconnect', function () {\n    appendLog('You have been disconnected.');\n  });\n\n  socket.on('reconnect', function () {\n    appendLog('You have been reconnected.');\n    login();\n  });\n\n}\n\nfunction addKeyEvent() {\n  const $input = $('#inputUsername');\n  $(window).keydown(event => {\n    // Auto-focus the current input when a key is typed\n    if (!(event.ctrlKey || event.metaKey || event.altKey)) {\n      $input.focus();\n    }\n  });\n}\n\nfunction addSubmitEvent() {\n  $('#formChat').submit(() => {\n    chat();\n    return false;\n  });\n\n  $('#formLogin').submit(() => {\n    login();\n    return false;\n  });\n}\n\nfunction login() {\n  const $input = $('#inputUsername');\n  const username = $input.val().trim();\n\n  if (username) {\n    $('#loginPage').fadeOut();\n    $('#chatPage').show();\n    $('#loginPage').off('click');\n\n    socket.emit('add user', username);\n  }\n}\n\nfunction chat() {\n  addMyMessage($('#inputUsername').val(), $('#inputMessage').val());\n  socket.emit('chat message', $('#inputMessage').val());\n  $('#inputMessage').val('');\n}\n\nfunction appendLog(msg) {\n  let $messages = $('#messages');\n  $messages.append($('<li class=\"log\">').text(msg));\n  $messages[0].scrollTop = $messages[0].scrollHeight;\n}\n\nfunction addMyMessage(user, msg) {\n  let $messages = $('#messages');\n  $messages.append($('<li>').html(`<span class=\"label label-success\">${user}</span> ${msg}`));\n  $messages[0].scrollTop = $messages[0].scrollHeight;\n}\n\nfunction addYourMessage(user, msg) {\n  let $messages = $('#messages');\n  $messages.append($('<li>').html(`<span class=\"label label-default\">${user}</span> ${msg}`));\n  $messages[0].scrollTop = $messages[0].scrollHeight;\n}\n\nfunction showTyping(user) {\n  let $messages = $('#messages');\n  $messages.append($('<li class=\"log\">').html(`${user} is typing...`).data('user', user));\n  $messages[0].scrollTop = $messages[0].scrollHeight;\n}\n\nfunction hideTyping(user) {\n  getTypingMessages(user).fadeOut(function () {\n    $(this).remove();\n  });\n}\n\nfunction getTypingMessages(user) {\n  return $('.log').filter(function (i) {\n    return $(this).data('user') === user;\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./public/js/index.js"],"sourceRoot":""}